<head>

<script src="js/jquery-2.1.4.min.js"></script>
<script src="js/handlebars-v3.0.3.js"></script>


<script src="js/bootstrap.min.js"></script>

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/gallery.css" rel="stylesheet">
<link href="css/bootstrap.min.css" rel="stylesheet">

</head>

<body role="document">

  <div class="container">
      <div class="page-header">
      <h1>My photo albums </h1>
    </div> 

    <div class="navbar-form navbar-right">
      <input id="searchbox" type="text" class="form-control" placeholder="Search...">
    </div>
    <ul class="nav nav-tabs">
          <li role=""  id="detailsbtn"><a href="#">Details</a></li>
          <li role="" id="modalbtn"><a href="#">Modal</a></li>
    </ul> 
    <br/><br/>  

    <div id="content"  class="container-fluid"  role="main">
    </div>

    <div id="modal-container"  >
    </div>
  </div>
      <script id="album-template" type="text/x-handlebars-template">

      <div class="row">
        {{#each images}} 
        <div class="col-xs-12 col-md-3"> 
         <div class="thumbnail" data-id="{{@index}}">
            <img class="crop-img" src="{{src}}" alt=""/> 
              
             <div class="author">
                <h3> {{title}} </h3>
                <p> {{author}} </p>
             </div>
          </div>
           
          </div> <!-- / col -->
          {{/each}}
      </div> <!-- / row -->
    </script>

    <script id="modal-template" type="text/x-handlebars-template">
      <div id="imageModal" class="modal fade" role="dialog">
        <div class="modal-dialog"  style="width:800">

          <div class="modal-content">
            
            <div class="modal-body">
              <img  style="width:100%" src="{{src}}"/>
            </div>
            
          </div>

        </div>
      </div>
    </script>
  </body>
	
  <script type="text/javascript">
    var source   = $("#album-template").html();
    var template = Handlebars.compile(source);

    source   = $("#modal-template").html();
    var modal_template = Handlebars.compile(source);
    
    var data = {images:[
         {
       src: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Shopping_Center_Magna_Plaza_Amsterdam_2014.jpg/2560px-Shopping_Center_Magna_Plaza_Amsterdam_2014.jpg", 
           title: "Shopping Center Magna Plaza Amsterdam 2014",
           author: "Tuxyso", 
           },
         {
       src: "https://upload.wikimedia.org/wikipedia/commons/archive/9/97/20101017074210%21The_Earth_seen_from_Apollo_17.jpg", 
           title:"The Earth seen from Apollo 17",
           author:"Ed g2s"
           },
         {
       src:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/68/Barnard_33.jpg/300px-Barnard_33.jpg",
           title: "horse nebula",
           author: "John Smith", 
           },
         {
           src:"http://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Wwii_woman_worker-edit.jpg/300px-Wwii_woman_worker-edit.jpg",
           title:"wwii woman worker",
           author:"Another author", 
        },
         {
       src:"http://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Lijiang_Yunnan_China-Naxi-people-carrying-baskets-01.jpg/300px-Lijiang_Yunnan_China-Naxi-people-carrying-baskets-01.jpg",
           title:"Lijiang Yunnan China Naxi people carrying baskets-",
           author:"Wikimedia Commons", 
           }, 
         {
       src:"http://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/Stift_G%C3%B6ttweig_Gobelinzimmer_01.JPG/300px-Stift_G%C3%B6ttweig_Gobelinzimmer_01.JPG",
           title:"Marco's house",
           author:"Wikimedia Commons", 
           }, 
         
         ]};
    var html    = template(data);
    
    $('#content').html(html);

    function displayModal(event){
        var imageNumber = $(this).data("id");

        var html    = modal_template(data.images[imageNumber]);
        $('#modal-container').html(html);

        $("#imageModal").modal('show');
    }

    $('.thumbnail').click(displayModal);

    $('#searchbox').keypress(function (e) {
      if (e.which == 13) {
        var search_text = $('#searchbox').val();
        console.log(search_text)
        var filteredData = {
          images: data.images.filter(function(d){
            if (d.title.search(search_text) > -1){
              return true;
            }
            if (d.author.search(search_text) > -1){
              return true;
            }
            return false;
          })
        };
        
        var html    = template(filteredData);
        $('#content').html(html);
      }
    });

  </script>

</body>